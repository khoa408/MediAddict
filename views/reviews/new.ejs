<% include ../partials/header %>
<% include ../ejs-functions/capFirst %>
<link href="/stylesheets/form.css" rel="stylesheet">
<div class="container mt-2" id="frame">
	<div class="col-lg-12">
		<form class="form-new-entry" method="post" action="/entry/<%= entry._id %>/reviews" onsubmit="return validateForm()" novalidate>
			<div class="text-center mb-4">
				<h1 class="h3 mb-3 font-weight-normal">Review <%=entry.name%> </h1>
			</div>
			<div class="form-label-group">
				<div class="row">
					<div class="col-1 mr-2">
						<p>Rating:</p>
					</div>
					<div class="col">
						<select name="rating" id="rating" style="font-size:1.2rem" required>
							<option value="5">5</option>
							<option value="4">4</option>
							<option value="3">3</option>
							<option value="2">2</option>
							<option value="1">1</option>
							<option value="0">0</option>
						</select>
					</div>
				</div>
			</div>
			<label for="comment mt-1">Review (optional):</label>
			<div class="form-group">
				<textarea class="form-control" rows="5" name="comment" id="comment" maxlength="1000" ;></textarea>
				<div class="invalid-feedback">
					Description cannot be more than 1000 characters
				</div>
			</div>
			<button class="btn btn-lg btn-primary btn-block submit-button mb-2" type="submit">Submit new review</button>
			<p> or <a href="javascript:history.back()">Go Back</a></p>
		</form>
	</div>
</div>
<script>

(function() {
	'use strict';
	window.addEventListener('load', function() {
		// Fetch all the forms we want to apply custom Bootstrap validation styles to
		var forms = document.getElementsByClassName('form-new-entry');
		// Loop over them and prevent submission
		var validation = Array.prototype.filter.call(forms, function(form) {
			form.addEventListener('submit', function(event) {
				if (form.checkValidity() === false) {
					event.preventDefault();
					event.stopPropagation();
				}
				form.classList.add('was-validated');
			}, false);
		});
	}, false);
})();

</script>
<% include ../partials/footer %>